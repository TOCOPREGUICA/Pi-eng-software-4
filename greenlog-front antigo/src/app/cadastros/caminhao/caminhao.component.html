<app-topbar></app-topbar>
<app-sidebar></app-sidebar>

<div class="form-container">
  <h2>Cadastro de Caminh√£o</h2>

  <div class="form-group">
    <label for="placa">Placa:</label>
    <input id="placa" [(ngModel)]="placa" type="text" placeholder="Digite a placa do caminh√£o" />
    <small class="info erro" *ngIf="formEnviado && placa?.trim() === ''">
      A placa do caminh√£o √© obrigat√≥ria.
    </small>
  </div>

  <div class="form-group">
    <label for="motorista">Nome do Motorista:</label>
    <input id="motorista" [(ngModel)]="motorista" type="text" placeholder="Digite o nome do motorista" (keypress)="permitirSomenteLetras($event)" />
    <small class="info erro" *ngIf="formEnviado && motorista?.trim() === ''">
      O nome do motorista √© obrigat√≥rio.
    </small>
  </div>

  <div class="form-group">
    <label for="capacidade">Capacidade M√°xima (kg):</label>
    <input id="capacidade" [(ngModel)]="capacidade" min="1" type="number" placeholder="Digite a capacidade em kg" />
    <small class="info erro" *ngIf="formEnviado && (capacidade === null || capacidade <= 0)">
      A capacidade √© obrigat√≥ria e deve ser maior que zero.
    </small>
  </div>

  <div class="form-group">
    <label for="residuo">Tipo de Res√≠duo:</label>
    <select id="residuo" [(ngModel)]="residuoSelecionado">
      <option value="" disabled [selected]="residuoSelecionado === ''">Selecione o tipo de res√≠duo</option>
      <option value="Pl√°stico">Pl√°stico</option>
      <option value="Papel">Papel</option>
      <option value="Metal">Metal</option>
      <option value="Org√¢nico">Org√¢nico</option>
    </select>
    <small class="info erro" *ngIf="formEnviado && residuoSelecionado === ''">
      Selecione um res√≠duo.
    </small>
  </div>

  <div class="button-group">
    <button class="btn salvar" (click)="salvar()">üíæ {{ idEditando !== null ? 'Atualizar' : 'Salvar' }}</button>
    <button *ngIf="idEditando !== null" class="btn cancelar" (click)="limparCampos()">‚ùå Cancelar</button>
  </div>
</div>

<hr />
<h3>Caminh√µes Cadastrados:</h3>

<table class="tabela-pessoas">
  <thead>
    <tr>
      <th>Placa</th>
      <th>Motorista</th>
      <th>Capacidade (kg)</th>
      <th>Tipos de Res√≠duos</th>
      <th>A√ß√µes</th>
    </tr>
  </thead>
  <tbody>
  <tr *ngFor="let c of caminhoes">
    <td>{{ c.placa }}</td>
    <td>{{ c.motorista }}</td>
    <td>{{ c.capacidade }}</td>
    <td>{{ c.residuos }}</td> <!-- Agora string -->
    <td>
      <button class="btn editar" (click)="editar(c)">‚úèÔ∏è Editar</button>
      <button *ngIf="c.id !== undefined" class="btn excluir" (click)="excluir(c.id)">üóëÔ∏è Excluir</button>
    </td>
  </tr>
</tbody>
</table>