<app-topbar></app-topbar>
<app-sidebar></app-sidebar>

<div class="form-container">
    <h2>Cadastro de Rota de Caminh√£o</h2>

    <div class="form-group">
        <label for="caminhao">Caminh√£o:</label>
        <input id="caminhao" [(ngModel)]="caminhao" type="text" placeholder="Clique para buscar caminh√£o"(click)="abrirModal()" readonly/>
    </div>

    <!--            (click)="abrirModal()" readonly  -->

    <!-- MODAL DE CAMINH√ÉO -->
    <div class="modal-overlay" *ngIf="mostrarModal">
        <div class="modal">
            <h3>Buscar Caminh√£o</h3>

            <input type="text" [(ngModel)]="termoBusca" placeholder="Buscar por placa, ID ou tipo de res√≠duo" />

            <table class="tabela-caminhao">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Placa</th>
                        <th>Tipo de Res√≠duo</th>
                        <th>A√ß√£o</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let c of caminhoes">
                        <td>{{ c.id }}</td>
                        <td>{{ c.placa }}</td>
                        <td>{{ c.residuo }}</td>
                        <td><button class="btn salvar" (click)="selecionarCaminhao(c)">Selecionar</button></td>
                    </tr>
                </tbody>
            </table>

            <div style="text-align: right; margin-top: 10px;">
                <button class="btn cancelar" (click)="fecharModal()">Fechar</button>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="data">Data:</label>
        <input id="data" [(ngModel)]="data" type="date" />
    </div>

    <div class="form-group">
        <label for="origem">Origem:</label>
        <input id="origem" [(ngModel)]="origem" type="text" placeholder="Digite a origem" />
    </div>

    <div class="form-group">
        <label for="destino">Destino:</label>
        <input id="destino" [(ngModel)]="destino" type="text" placeholder="Digite o destino" />
    </div>

    <div class="button-group">
        <button class="btn salvar" (click)="salvar()">üíæ {{ idEditando !== null ? 'Atualizar' : 'Salvar' }}</button>
        <button *ngIf="idEditando !== null" class="btn cancelar" (click)="limparCampos()">‚ùå Cancelar</button>
    </div>
</div>

<hr />
<h3>Rotas Cadastradas:</h3>

<table class="tabela-rotas">
    <thead>
        <tr>
            <th>Caminh√£o</th>
            <th>Data</th>
            <th>Origem</th>
            <th>Destino</th>
            <th>A√ß√µes</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let r of rotas">
            <td>{{ r.caminhao }}</td>
            <td>{{ r.data }}</td>
            <td>{{ r.origem }}</td>
            <td>{{ r.destino }}</td>
            <td>
                <button class="btn editar" (click)="editar(r,r.id)">‚úèÔ∏è Editar</button>
                <button class="btn excluir" (click)="excluir(r.id)">üóëÔ∏è Excluir</button>
            </td>
        </tr>
    </tbody>
</table>